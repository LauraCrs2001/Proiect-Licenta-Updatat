{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/didi_/Desktop/proiectlicenta/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/didi_/Desktop/proiectlicenta/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/didi_/Desktop/proiectlicenta/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Password(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),inputPassword=_useState2[0],setInputPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),inputConfirmPassword=_useState4[0],setInputConfirmPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),passwordError=_useState6[0],setPasswordError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPasswordError=_useState8[0],setConfirmPasswordError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),token=_useState10[0],setToken=_useState10[1];useEffect(function(){var urlParams=new URLSearchParams(window.location.search);var token=urlParams.get(\"token\");setToken(token);},[]);var handleInputPasswordChange=function handleInputPasswordChange(event){var password=event.target.value;setInputPassword(password);};var handleInputConfirmPasswordChange=function handleInputConfirmPasswordChange(event){var confirmPassword=event.target.value;setInputConfirmPassword(confirmPassword);};var validateResetForm=function validateResetForm(){var isValid=true;if(inputPassword.length<6){setPasswordError(\"Password must be at least 6 characters long.\");isValid=false;}else if(!/\\d/.test(inputPassword)){setPasswordError(\"Password must contain at least one number.\");isValid=false;}else if(!/[A-Z]/.test(inputPassword)){setPasswordError(\"Password must contain at least one uppercase letter.\");isValid=false;}else{setPasswordError(\"\");}if(inputPassword!==inputConfirmPassword){setConfirmPasswordError(\"Passwords do not match.\");isValid=false;}else{setConfirmPasswordError(\"\");}return isValid;};var handleResetSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();if(!validateResetForm()){_context.next=11;break;}_context.prev=2;_context.next=5;return fetch(\"/confirm-reset-password\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:inputPassword,token:token})});case 5:response=_context.sent;if(response.ok){setInputPassword(\"\");setInputConfirmPassword(\"\");}else{}_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);case 11:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}));return function handleResetSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-singup\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleResetSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Reset Password\"}),passwordError&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:passwordError}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"New Password\",value:inputPassword,onChange:handleInputPasswordChange}),confirmPasswordError&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:confirmPasswordError}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"Confirm New Password\",value:inputConfirmPassword,onChange:handleInputConfirmPasswordChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Reset Password\"})]})});}export default Password;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Password","_useState","_useState2","_slicedToArray","inputPassword","setInputPassword","_useState3","_useState4","inputConfirmPassword","setInputConfirmPassword","_useState5","_useState6","passwordError","setPasswordError","_useState7","_useState8","confirmPasswordError","setConfirmPasswordError","_useState9","_useState10","token","setToken","urlParams","URLSearchParams","window","location","search","get","handleInputPasswordChange","event","password","target","value","handleInputConfirmPasswordChange","confirmPassword","validateResetForm","isValid","length","test","handleResetSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","JSON","stringify","sent","ok","t0","stop","_x","apply","arguments","className","children","onSubmit","type","name","placeholder","onChange"],"sources":["C:/Users/didi_/Desktop/proiectlicenta/client/src/comp/User/Password.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nfunction Password() {\r\n  const [inputPassword, setInputPassword] = useState(\"\");\r\n  const [inputConfirmPassword, setInputConfirmPassword] = useState(\"\");\r\n  const [passwordError, setPasswordError] = useState(\"\");\r\n  const [confirmPasswordError, setConfirmPasswordError] = useState(\"\");\r\n  const [token, setToken] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const token = urlParams.get(\"token\");\r\n    setToken(token);\r\n  }, []);\r\n\r\n  const handleInputPasswordChange = (event) => {\r\n    const password = event.target.value;\r\n    setInputPassword(password);\r\n  };\r\n\r\n  const handleInputConfirmPasswordChange = (event) => {\r\n    const confirmPassword = event.target.value;\r\n    setInputConfirmPassword(confirmPassword);\r\n  };\r\n\r\n  const validateResetForm = () => {\r\n    let isValid = true;\r\n\r\n    if (inputPassword.length < 6) {\r\n      setPasswordError(\"Password must be at least 6 characters long.\");\r\n      isValid = false;\r\n    } else if (!/\\d/.test(inputPassword)) {\r\n      setPasswordError(\"Password must contain at least one number.\");\r\n      isValid = false;\r\n    } else if (!/[A-Z]/.test(inputPassword)) {\r\n      setPasswordError(\"Password must contain at least one uppercase letter.\");\r\n      isValid = false;\r\n    } else {\r\n      setPasswordError(\"\");\r\n    }\r\n\r\n    if (inputPassword !== inputConfirmPassword) {\r\n      setConfirmPasswordError(\"Passwords do not match.\");\r\n      isValid = false;\r\n    } else {\r\n      setConfirmPasswordError(\"\");\r\n    }\r\n\r\n    return isValid;\r\n  };\r\n\r\n  const handleResetSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (validateResetForm()) {\r\n      try {\r\n        const response = await fetch(\"/confirm-reset-password\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            password: inputPassword,\r\n            token: token,\r\n          }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          setInputPassword(\"\");\r\n          setInputConfirmPassword(\"\");\r\n        } else {\r\n        }\r\n      } catch (error) {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-singup\">\r\n      <form onSubmit={handleResetSubmit}>\r\n        <h1>Reset Password</h1>\r\n        {passwordError && <span className=\"error\">{passwordError}</span>}\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"New Password\"\r\n          value={inputPassword}\r\n          onChange={handleInputPasswordChange}\r\n        />\r\n        {confirmPasswordError && <span className=\"error\">{confirmPasswordError}</span>}\r\n        <input\r\n          type=\"password\"\r\n          name=\"confirmPassword\"\r\n          placeholder=\"Confirm New Password\"\r\n          value={inputConfirmPassword}\r\n          onChange={handleInputConfirmPasswordChange}\r\n        />\r\n        <button type=\"submit\">Reset Password</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Password;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}